(()=>{var t,e={170:(t,e,i)=>{"use strict";var n;i.d(e,{Z:()=>m});var o=new Uint8Array(16);function r(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(t){return"string"==typeof t&&s.test(t)};for(var l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));const d=function(t,e,i){var n=(t=t||{}).random||(t.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var o=0;o<16;++o)e[i+o]=n[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!a(i))throw TypeError("Stringified UUID is invalid");return i}(n)};function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.overlay=null,this.dom=null,this.initDom=null,this.originRect={},this.init=!0,this.overlayId=d(),this.overlayStyle="background-color: rgba(229, 231, 235, .9); position: fixed; top: -100%; left: 0; bottom: -100%; right: 0; opacity: .9; z-index: 66;cursor:pointer;"}var e,i;return e=t,(i=[{key:"initPreview",value:function(t,e){this.initDom=t,this.dom=t,this.init=!0;var i=t.dataset;this.originRect=t.getBoundingClientRect(),this.items=this.getItems(e),this.hasItems=this.items.length>=2;for(var n=0,o=0;o<this.items.length;o++)this.items[o].dataset.id===i.id&&(n=o);this.createOverlayElement(),this.setCurrentDom(n)}},{key:"setCurrentDom",value:function(t){this.currentIndex=t,this.dom=this.items[t],this.createCoverElement(),this.hasNext()?document.getElementById("preview-next").style.display="block":document.getElementById("preview-next").style.display="none",this.hasPrev()?document.getElementById("preview-prev").style.display="block":document.getElementById("preview-prev").style.display="none"}},{key:"getItems",value:function(t){var e=[];if(void 0===t)for(var i=this.dom.parentElement.children,n=0;n<i.length;n++)void 0!==i[n].dataset.width&&e.push(i[n]);else e=!1===t?[this.dom]:t;return e}},{key:"getSrc",value:function(t){return t.src?t.src:t.dataset.src}},{key:"getWindowSize",value:function(){return{windowHeight:window.innerHeight,windowWidth:window.innerWidth}}},{key:"getPreviewBoxOffset",value:function(){return{left:100,right:100,top:10,bottom:10}}},{key:"getImageResetRatio",value:function(t,e){var i=this.getPreviewBoxOffset(),n=i.left,o=i.top,r=i.right,s=i.bottom,a=this.getWindowSize(),l=a.windowHeight-o-s,c=a.windowWidth-n-r,d=c/t,u=l/e;return e<=l&&t<=c?{x:1,y:1}:d<u?{x:d,y:d}:{x:u,y:u}}},{key:"getImagePosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||this.dom,i=e.getBoundingClientRect(),n=e.getAttribute("data-width"),o=e.getAttribute("data-height"),r=this.getPreviewBoxOffset(),s=this.getWindowSize(),a=this.getImageResetRatio(n,o),l=r.top+(s.windowHeight-r.top-r.bottom)/2,c=r.left+(s.windowWidth-r.left-r.right)/2,d=c-(i.left+i.width/2),u=l-(i.top+i.height/2),h=a.y*o/i.height,m=a.x*n/i.width;return{translateX:d,translateY:u,scaleX:m,scaleY:h,showHeight:a.y*o,showWidth:a.x*n}}},{key:"setPreviewImageElementStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||document.getElementById("preview"),i=this.getSrc(this.dom);e.style="transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);transition-duration: 150ms;",e.style.backgroundImage="url('".concat(i,"')"),e.style.backgroundSize="100% 100%",e.style.backgroundPosition="50%",e.style.backgroundRepeat="no-repeat",e.style.position="fixed",e.style.zIndex=99,e.style.opacity=1,e.style.transformOrigin="center center 0";var n=this.originRect,o=this.items[this.currentIndex].getBoundingClientRect();e.style.top="".concat(n.top,"px"),e.style.left="".concat(n.left,"px"),e.style.width="".concat(o.width,"px"),e.style.height="".concat(o.height,"px")}},{key:"createCoverElement",value:function(){if(!document.getElementById("preview")){var t=document.createElement("div");t.setAttribute("id","preview"),document.body.append(t)}var e=document.getElementById("preview");this.setPreviewImageElementStyle(),this.init&&(this.dom.style.opacity=0),this.imageBoxElement=e;var i=this.getImagePosition();setTimeout((function(){e.style.transform="translate(".concat(i.translateX,"px, ").concat(i.translateY,"px) scale(").concat(i.scaleX,", ").concat(i.scaleY,")")}))}},{key:"createOverlayElement",value:function(){var t=this;if(!document.getElementById(this.overlayId)){var e=document.createElement("div");e.setAttribute("id",this.overlayId),e.setAttribute("class","transition"),e.style=this.overlayStyle,document.getElementById("preview-next")||(e.innerHTML='\n              <div style="position:absolute; left:0; top:50%; color: #000; font-size: 24px; padding-left: 16px;" id="preview-prev"><i class="fa fa-arrow-left"></i></div>\n              <div style="position:absolute; right:0; top:50%; color: #000; font-size: 24px; padding-left: 16px;" id="preview-next"><i class="fa fa-arrow-right"></i></div>'),document.body.append(e),this.overlay=e}this.nextElement=document.getElementById("preview-next"),this.prevElement=document.getElementById("preview-prev"),this.nextElement.addEventListener("click",(function(e){e.stopPropagation(),t.next()})),this.prevElement.addEventListener("click",(function(e){e.stopPropagation(),t.prev()})),this.overlay.addEventListener("click",(function(){t.close()}))}},{key:"close",value:function(){this.overlay.style=this.overlayStyle+"display: none;",this.setClosedStyle(),this.overlay.removeEventListener("click",(function(){})),this.overlay.remove()}},{key:"setClosedStyle",value:function(){var t=this,e=this.imageBoxElement.getBoundingClientRect(),i=this.items[this.currentIndex].getBoundingClientRect(),n=document.defaultView.getComputedStyle(this.imageBoxElement).transform.replace("matrix(","").replace(")","").replace(" ","").split(","),o=n[4],r=n[5],s=n[0],a=n[3],l=i.top+i.height/2,c=e.top+i.height*a/2,d=i.left+i.width/2-(e.left+i.width*s/2)+parseFloat(o),u=l-c+parseFloat(r);this.imageBoxElement.style.transform="translate(".concat(d,"px, ").concat(u,"px) scale(1, 1)"),this.initDom.style.opacity=1,setTimeout((function(){t.imageBoxElement.style.zIndex=-999,t.imageBoxElement.style.opacity=0}),250)}},{key:"next",value:function(){this.init=!1,this.originRect=this.items[this.currentIndex+1].getBoundingClientRect(),this.setPreviewImageElementStyle(),this.setCurrentDom(this.currentIndex+1)}},{key:"prev",value:function(){this.init=!1,this.originRect=this.items[this.currentIndex-1].getBoundingClientRect(),this.setPreviewImageElementStyle(),this.setCurrentDom(this.currentIndex-1)}},{key:"hasNext",value:function(){return this.hasItems&&this.currentIndex<this.items.length-1}},{key:"hasPrev",value:function(){return this.hasItems&&this.currentIndex>0}}])&&u(e.prototype,i),t}();const m=function(){return new h}}},i={};function n(t){if(i[t])return i[t].exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=n(170).Z,window.addEventListener("DOMContentLoaded",(function(){window.imagePreview=function(e,i){t().initPreview(e,i)}}))})();